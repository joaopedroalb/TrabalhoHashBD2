#pragma checksum "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "fcc0012c86edb492c0d084283895725f8225c91d"
// <auto-generated/>
#pragma warning disable 1591
namespace interfaceblazor.Pages
{
    #line hidden
    using System;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\_Imports.razor"
using interfaceblazor;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\_Imports.razor"
using interfaceblazor.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
using interfaceblazor.Model.Pag;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
using System.Collections.Generic;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
using System.IO;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
using System.Linq;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/interface")]
    public partial class Interface : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "div");
            __builder.AddAttribute(1, "class", "interfaceContainer");
#nullable restore
#line 8 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
     if(numeroDasPaginasSetados==false){

#line default
#line hidden
#nullable disable
            __builder.OpenElement(2, "label");
            __builder.AddAttribute(3, "style", "font-size: 30px;");
            __builder.AddContent(4, "Digite o ");
            __builder.AddMarkupContent(5, "<strong>tamanho</strong> das paginas, o numero de tuplas é de ");
            __builder.OpenElement(6, "strong");
            __builder.AddContent(7, 
#nullable restore
#line 9 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
                                                                                                                    total

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(8, "\r\n    <br>\r\n    ");
            __builder.OpenElement(9, "div");
            __builder.AddAttribute(10, "class", "input-group mb-3");
            __builder.AddAttribute(11, "style", "width: 500px;");
            __builder.OpenElement(12, "input");
            __builder.AddAttribute(13, "type", "number");
            __builder.AddAttribute(14, "class", "form-control");
            __builder.AddAttribute(15, "required");
            __builder.AddAttribute(16, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 12 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
                                     tamanhoPag

#line default
#line hidden
#nullable disable
            , culture: global::System.Globalization.CultureInfo.InvariantCulture));
            __builder.AddAttribute(17, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => tamanhoPag = __value, tamanhoPag, culture: global::System.Globalization.CultureInfo.InvariantCulture));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.AddMarkupContent(18, "\r\n        ");
            __builder.OpenElement(19, "button");
            __builder.AddAttribute(20, "class", "btn btn-primary");
            __builder.AddAttribute(21, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 13 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
                                                  addPagArr

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(22, "style", "margin-left: 5px;");
            __builder.AddContent(23, "Confirmar");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(24, "\r\n    <br>\r\n    ");
            __builder.OpenElement(25, "small");
            __builder.AddContent(26, 
#nullable restore
#line 16 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
            avisoPaginas

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 17 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
}else{

   

#line default
#line hidden
#nullable disable
#nullable restore
#line 19 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
    if(paginasPopulada==false){
       //percorre o arquivo de texto
    

#line default
#line hidden
#nullable disable
#nullable restore
#line 21 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
     foreach (string line in lines){
        indexPaginaAux++;
        bool aux = true;
        while(aux){
            //percorrer o vetor de paginas
            

#line default
#line hidden
#nullable disable
#nullable restore
#line 26 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
             if(indexPagina<paginasArr.Count){
             

#line default
#line hidden
#nullable disable
#nullable restore
#line 27 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
              if(paginasArr[indexPagina].linhas.Length > paginasArr[indexPagina].index){
                 //adiciona na pagina
                paginasArr[indexPagina].adicionarNaPag(line);
                //adicionarHash(line,indexPagina,paginasArr[indexPagina].index);
                aux = false;
             }else{
                indexPagina++;
            }

#line default
#line hidden
#nullable disable
#nullable restore
#line 34 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
             
          }

#line default
#line hidden
#nullable disable
#nullable restore
#line 35 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
           
        } 
        if(indexPaginaAux==466551){
            paginasPopulada = true; 
            addHashArr();
            StateHasChanged();
        }  
    }

#line default
#line hidden
#nullable disable
#nullable restore
#line 42 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
     
   }else{

#line default
#line hidden
#nullable disable
            __builder.OpenElement(27, "div");
            __builder.AddAttribute(28, "class", "searchContainer");
            __builder.AddMarkupContent(29, "<label style=\"color:black;\">Pesquisar</label>\r\n        <br>\r\n        ");
            __builder.OpenElement(30, "div");
            __builder.AddAttribute(31, "class", "btnSearchContainer");
            __builder.OpenElement(32, "input");
            __builder.AddAttribute(33, "class", "form-control");
            __builder.AddAttribute(34, "type", "text");
            __builder.AddAttribute(35, "placeholder", "Palavra");
            __builder.AddAttribute(36, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 48 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
                                                                  nomePesquisar

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(37, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => nomePesquisar = __value, nomePesquisar));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.AddMarkupContent(38, "\r\n            ");
            __builder.OpenElement(39, "button");
            __builder.AddAttribute(40, "class", "btn btn-primary");
            __builder.AddAttribute(41, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 49 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
                                                      buscarKey

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(42, "Pesquisar");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(43, "\r\n        <br>");
#nullable restore
#line 52 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
         if(achouKey){

#line default
#line hidden
#nullable disable
            __builder.OpenElement(44, "p");
            __builder.AddAttribute(45, "style", "color: #00c132;");
            __builder.AddContent(46, 
#nullable restore
#line 53 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
                                        info

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 54 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
        }else{

#line default
#line hidden
#nullable disable
            __builder.OpenElement(47, "p");
            __builder.AddAttribute(48, "style", "color: #ff0b0b;");
            __builder.AddContent(49, 
#nullable restore
#line 55 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
                                        info

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 56 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
        }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(50, "\r\n    <br>");
#nullable restore
#line 59 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
     if(!jaPercorreuOverflowArr){
         

#line default
#line hidden
#nullable disable
#nullable restore
#line 60 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
          foreach (int index in OverflowArr()){
            overflowsTotal += bucketContainer[index].buckets.Count - 1;
         }

#line default
#line hidden
#nullable disable
#nullable restore
#line 62 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
          
        jaPercorreuOverflowArr=true;
    }

    

#line default
#line hidden
#nullable disable
            __builder.OpenElement(51, "div");
            __builder.AddAttribute(52, "class", "infoContainer");
            __builder.OpenElement(53, "div");
            __builder.AddAttribute(54, "class", "parContainer");
            __builder.OpenElement(55, "div");
            __builder.AddAttribute(56, "class", "infoBg");
            __builder.OpenElement(57, "p");
            __builder.AddContent(58, "Overflows: ");
            __builder.OpenElement(59, "strong");
            __builder.AddContent(60, 
#nullable restore
#line 70 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
                                                       overflowsTotal

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(61, "\r\n            ");
            __builder.OpenElement(62, "div");
            __builder.AddAttribute(63, "class", "infoBg");
            __builder.OpenElement(64, "p");
            __builder.AddContent(65, "Acesso a disco:");
            __builder.OpenElement(66, "strong");
            __builder.AddContent(67, 
#nullable restore
#line 71 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
                                                           acessoDisco

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(68, "\r\n\r\n        ");
            __builder.OpenElement(69, "div");
            __builder.AddAttribute(70, "class", "parContainer");
            __builder.OpenElement(71, "div");
            __builder.AddAttribute(72, "class", "infoBg");
            __builder.OpenElement(73, "p");
            __builder.AddContent(74, "O numero de colisoes: ");
            __builder.OpenElement(75, "strong");
            __builder.AddContent(76, 
#nullable restore
#line 75 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
                                                                  colisoes

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(77, "\r\n            ");
            __builder.OpenElement(78, "div");
            __builder.AddAttribute(79, "class", "infoBg");
            __builder.OpenElement(80, "p");
            __builder.AddContent(81, "Tamanho da pagina: ");
            __builder.OpenElement(82, "strong");
            __builder.AddContent(83, 
#nullable restore
#line 76 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
                                                               tamanhoPag

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(84, "\r\n\r\n        ");
            __builder.OpenElement(85, "div");
            __builder.AddAttribute(86, "class", "parContainer");
            __builder.OpenElement(87, "div");
            __builder.AddAttribute(88, "class", "infoBg");
            __builder.OpenElement(89, "p");
            __builder.AddContent(90, "Total de paginas: ");
            __builder.OpenElement(91, "strong");
            __builder.AddContent(92, 
#nullable restore
#line 80 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
                                                              paginasArr.Count

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(93, "\r\n            ");
            __builder.OpenElement(94, "div");
            __builder.AddAttribute(95, "class", "infoBg");
            __builder.OpenElement(96, "p");
            __builder.AddContent(97, "Ultima pesquisa: ");
            __builder.OpenElement(98, "strong");
            __builder.AddContent(99, 
#nullable restore
#line 81 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
                                                             ultimaPesquisa

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 85 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
    
   }

#line default
#line hidden
#nullable disable
#nullable restore
#line 86 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
    
}

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line 91 "D:\Documents\Projetos\UNIFOR\BD\Interface\interfaceblazor\Pages\Interface.razor"
      
    public string ultimaPesquisa = "";
    public bool achouKey = false;
    public bool numeroDasPaginasSetados = false;
    public bool jaPercorreuOverflowArr = false;
    public int overflowsTotal = 0;
    public bool paginasPopulada = false;
    public int indexPaginaAux = 0;

    //out main variable
    public static List<Pagina> paginasArr = new List<Pagina>();
    public static BucketContainer[] bucketContainer = new BucketContainer[51839];
    public int acessoDisco = 0;
    public int colisoes = 0;

    public static string nomePesquisar = "";

    public static string info {get;set;} = "";

    //func 
    public static int HashLogic(string nome){
        int tamanhoMod = 51839;
        //int tamanhoMod = bucketContainer.Length;
        long sum = 0, mult = 1;
        for (int i = 0; i < nome.Length; i++){
                mult = (i % 4 == 0) ? 1 : mult * 256;
                sum += nome[i] * mult;
        }
        return (int)(Math.Abs(sum) % tamanhoMod);
    }

    public void adicionarHash(string nome, int id, int linha){
        int hashLogic = HashLogic(nome);
        if (bucketContainer[hashLogic] == null){
                bucketContainer[hashLogic] = new BucketContainer(new BucketObjeto(nome, id, linha));
        }else{
            bucketContainer[hashLogic].adicionar(new BucketObjeto(nome, id, linha));
            colisoes++;
            bucketContainer[hashLogic].colisao++;
         }
    }

    protected void buscarKey(){
        ultimaPesquisa = nomePesquisar;
        info = "";
        StateHasChanged();
        string key = nomePesquisar;
        int keyHash = HashLogic(key);
        bool achou = false;
        if (bucketContainer[HashLogic(key)] != null){
            foreach (Bucket bc in bucketContainer[HashLogic(key)].buckets){
                foreach (BucketObjeto bo in bc.vetorBO){
                    if (bo != null){
                        if (bo.key.ToLower() == key.ToLower()){
                            string nomeAux = paginasArr[bo.id].linhas[bo.linha - 1];
                            info += $"ID da pagina: {bo.id}\r";
                            info += $"Linha da pagina: {bo.linha}\r";
                            info += $"Nome: {nomeAux}\n";
                            acessoDisco++;
                            achou = true;
                            achouKey = true;
                            StateHasChanged();
                            break;
                        }
                    }
                 }
                    if (achou)
                        break;
            }
                if (!achou){
                    info = $"Não foi achado ninguem chamado {key}";
                    achouKey = false;
                    StateHasChanged();
                }
                    
        }
    }

    public static List<int> OverflowArr(){
        List<int> overflowArr = new List<int>();
        int indexAux = 0;
        foreach (BucketContainer bc in bucketContainer){
            if (bc != null){
                if (bc.buckets[0].overflow)
                     overflowArr.Add(indexAux);
            }
                indexAux++;
        }
            return overflowArr;
    }

    public static int numOverflow(){
        return OverflowArr().Count;
    }

    public static int overflowTotal(){
        int overflowTotais = 0;
        foreach(int index in OverflowArr()){
            overflowTotais += bucketContainer[index].buckets.Count;
        }
        return overflowTotais;
    }
   

    //in main variable

    //leitura do arquivo words.txt
    static string filePath = @"D:\Documents\Projetos\UNIFOR\BD\words.txt";
    static List<String> lines = File.ReadAllLines(filePath).ToList();
    int total = lines.Count;
    int indexPagina = 0;
    int tamanhoPag;
    
    public string avisoPaginas = "";

    //faz a criação da array de paginas totalmente vazia
    protected void addPagArr(){

        while(total>0){
            paginasArr.Add(new Pagina(tamanhoPag));
            total = total - tamanhoPag;
        }
        
        numeroDasPaginasSetados=true;
        StateHasChanged();
    }

    protected void addHashArr(){
        int line;
        int index = 0 ;
        foreach(var pagina in paginasArr){
            line = 1;
            foreach(string key in pagina.linhas){
                if(!string.IsNullOrEmpty(key))
                adicionarHash(key,index,line);
                line++;
            }
            index++;
        }
    }


#line default
#line hidden
#nullable disable
    }
}
#pragma warning restore 1591
